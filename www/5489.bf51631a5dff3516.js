"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5489],{35489:(A,_,r)=>{r.r(_),r.d(_,{VotePageModule:()=>T});var u=r(69808),l=r(34182),s=r(65649),m=r(99800),d=r(70655),t=r(72096),p=r(48266);function h(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-input",16),t.NdJ("ngModelChange",function(i){const g=t.CHM(e).index;return t.oxw(2).emailsVotantes[g]=i}),t.qZA()()}if(2&n){const e=c.index,o=t.oxw(2);t.xp6(1),t.Q6J("disabled",null==o.cantVotantesVotacion)("ngModel",o.emailsVotantes[e])}}function C(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item"),t._UZ(1,"ion-input",17),t.TgZ(2,"ion-icon",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).removeControl(a)}),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(1),t.Q6J("formControlName",e.key)}}const V=function(){return[]};function M(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-item")(2,"ion-label",2),t._uU(3,"Titulo de la Votaci\xf3n"),t.qZA(),t.TgZ(4,"ion-input",3),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().tituloVotacion=i}),t.qZA()(),t.TgZ(5,"ion-item")(6,"ion-label",2),t._uU(7,"Descripcion de la Votacion"),t.qZA(),t.TgZ(8,"ion-input",3),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().descripcionVotacion=i}),t.qZA()(),t.TgZ(9,"ion-item",4)(10,"ion-title",5),t._uU(11,"Votantes"),t.qZA()(),t.TgZ(12,"ion-toolbar")(13,"ion-list")(14,"ion-item")(15,"ion-label",2),t._uU(16,"Cantidad de Votantes"),t.qZA(),t.TgZ(17,"ion-input",6),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().cantVotantesVotacion=i}),t.qZA()(),t.YNc(18,h,2,2,"ion-item",7),t.qZA()(),t.TgZ(19,"ion-item",4)(20,"ion-title",5),t._uU(21,"Candidatos"),t.qZA()(),t.TgZ(22,"ion-toolbar")(23,"ion-item")(24,"ion-input",8),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().nameCandidato1=i}),t.qZA()(),t.TgZ(25,"ion-item")(26,"ion-input",8),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().nameCandidato2=i}),t.qZA()(),t.TgZ(27,"ion-list",9)(28,"form",10),t.YNc(29,C,3,1,"ion-item",7),t.ALo(30,"keyvalue"),t.qZA()(),t.TgZ(31,"ion-buttons",11)(32,"ion-button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().addControl()}),t._UZ(33,"ion-icon",13),t.qZA()()(),t.TgZ(34,"div",14)(35,"ion-button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().crearVotacion()}),t._uU(36,"Crear Votacion"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.tituloVotacion),t.xp6(4),t.Q6J("ngModel",e.descripcionVotacion),t.xp6(9),t.Q6J("ngModel",e.cantVotantesVotacion),t.xp6(1),t.Q6J("ngForOf",t.DdM(11,V).constructor(e.cantVotantesVotacion)),t.xp6(6),t.Q6J("ngModel",e.nameCandidato1),t.xp6(2),t.Q6J("ngModel",e.nameCandidato2),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(1),t.Q6J("ngForOf",t.lcZ(30,9,e.myForm.controls)),t.xp6(6),t.Q6J("disabled",null==e.tituloVotacion||e.descripcionVotacion.length<5==null||null==e.cantVotantesVotacion||null==e.nameCandidato1||null==e.nameCandidato2||e.tituloVotacion.length<5||e.descripcionVotacion.length<5||e.cantVotantesVotacion<1||e.nameCandidato1.length<2||e.nameCandidato2.length<2)}}function f(n,c){if(1&n&&(t.TgZ(0,"ion-item"),t._UZ(1,"ion-input",24),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("value",e)}}function x(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-item")(2,"ion-label",2),t._uU(3,"Titulo de la Votaci\xf3n"),t.qZA(),t.TgZ(4,"ion-input",19),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().vote.titleVote=i}),t.qZA()(),t.TgZ(5,"ion-item")(6,"ion-label",2),t._uU(7,"Descripcion de la Votacion"),t.qZA(),t.TgZ(8,"ion-input",20),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().vote.description=i}),t.qZA()(),t.TgZ(9,"ion-item",4)(10,"ion-title",5),t._uU(11,"Votantes"),t.qZA()(),t.TgZ(12,"ion-item")(13,"ion-label",2),t._uU(14,"Cantidad de Votantes"),t.qZA(),t.TgZ(15,"ion-input",21),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().vote.votantecount=i}),t.qZA()(),t.TgZ(16,"ion-item",4)(17,"ion-title",5),t._uU(18,"Candidatos"),t.qZA()(),t.YNc(19,f,2,1,"ion-item",7),t._UZ(20,"br"),t.TgZ(21,"ion-toolbar",22)(22,"ion-title"),t._uU(23," Link para votar "),t.qZA()(),t.TgZ(24,"ion-title"),t._UZ(25,"br"),t.TgZ(26,"a",23),t._uU(27,"LINK"),t.qZA()(),t._UZ(28,"br"),t.TgZ(29,"ion-toolbar",22)(30,"ion-title"),t._uU(31," Estado de la votaci\xf3n "),t.qZA()(),t.TgZ(32,"ion-title"),t._UZ(33,"br"),t.TgZ(34,"a",23),t._uU(35,"LINK"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.vote.titleVote),t.xp6(4),t.Q6J("ngModel",e.vote.description),t.xp6(7),t.Q6J("ngModel",e.vote.votantecount),t.xp6(4),t.Q6J("ngForOf",e.nameCandidatosVotacion),t.xp6(7),t.MGl("href","http://cleanvotes.com.ar/#/",e.vote.owner,"/voter",t.LSH),t.xp6(8),t.MGl("href","http://cleanvotes.com.ar/#/vote-status/",e.vote.owner,"",t.LSH)}}const Z=[{path:"",component:(()=>{class n{constructor(e,o,i,a,g){this.formBuilder=e,this.authService=o,this.alertController=i,this.toastController=a,this.loadingController=g,this.titulo="",this.vista="",this.nameCandidatosVotacion=[],this.candidatesCount=2,this.emailsVotantes=[],this.myForm=e.group({})}ngOnInit(){return(0,d.mG)(this,void 0,void 0,function*(){yield this.presentLoading(),(yield this.authService.checkMetaMask())?(yield this.presentToastMetaConnected(),(yield this.authService.searchVote())?(this.vote=yield this.authService.getVoteByAdmin(),this.nameCandidatosVotacion=yield this.authService.getCandidatesByAdmin(this.vote.candidatecount),this.titulo="Votacion Actual",this.vista="existente",console.log(this.vote.titleVote),this.loading.dismiss()):(this.vista="nueva",this.titulo="Nueva Votacion",this.isAuthenticating=!0,this.loading.dismiss())):(this.loading.dismiss(),yield this.presentNoMetaAlert(),this.vista="")})}presentLoading(){return(0,d.mG)(this,void 0,void 0,function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Conectando con la Blockchain..."}),yield this.loading.present()})}crearVotacion(){return(0,d.mG)(this,void 0,void 0,function*(){yield this.presentLoading();const e=yield this.authService.postVotacion(this.tituloVotacion,this.descripcionVotacion,this.cantVotantesVotacion,this.nameCandidato1,this.nameCandidato2,this.myForm.value,this.emailsVotantes);this.authService.sendMailsVotacion(e).subscribe(o=>{this.loading.dismiss(),location.reload()})})}addControl(){this.candidatesCount++,this.myForm.addControl("candidato"+this.candidatesCount,new l.NI("",l.kI.required))}removeControl(e){this.myForm.removeControl(e.key)}presentNoMetaAlert(){return(0,d.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Necesitas Metamask para utilizar CleanVote",subHeader:"Por favor, instala metamask y recarga la pagina",backdropDismiss:!1});yield e.present();const{role:o}=yield e.onDidDismiss();console.log("onDidDismiss resolved with role",o)})}presentToastMetaConnected(){return(0,d.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"\xa1Metamask Conectado!",duration:2e3})).present()})}testBackend(){return(0,d.mG)(this,void 0,void 0,function*(){})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(p.X),t.Y36(s.Br),t.Y36(s.yF),t.Y36(s.HT))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-vote"]],decls:6,vars:3,consts:[["color","primary"],[4,"ngIf"],["position","stacked"],["required","","type","text",3,"ngModel","ngModelChange"],["color","secondary"],["size","small"],["required","","type","number",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["required","","type","text","placeHolder","Nombre de un Candidato",3,"ngModel","ngModelChange"],["lines","none"],[3,"formGroup"],["slot","end"],["expand","full","color","tertiary","shape","round",3,"click"],["slot","icon-only","name","add"],["id","container"],["shape","round",3,"disabled","click"],["required","","type","text","placeHolder","Email del Votante ",3,"disabled","ngModel","ngModelChange"],["required","","type","text","placeHolder","Nombre del Candidato!",3,"formControlName"],["name","close-circle",3,"click"],["disabled","","type","text",3,"ngModel","ngModelChange"],["required","","disabled","","type","text",3,"ngModel","ngModelChange"],["required","","disabled","","type","number",3,"ngModel","ngModelChange"],["color","tertiary"],["target","_blank",3,"href"],["required","","disabled","","type","text",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3),t.qZA()()(),t.YNc(4,M,37,12,"ion-content",1),t.YNc(5,x,36,6,"ion-content",1)),2&e&&(t.xp6(3),t.Oqu(o.titulo),t.xp6(1),t.Q6J("ngIf","nueva"==o.vista),t.xp6(1),t.Q6J("ngIf","existente"==o.vista))},directives:[s.Gu,s.sr,s.wd,u.O5,s.W2,s.Ie,s.Q$,s.pK,s.j9,l.Q7,l.JJ,l.On,s.q_,s.as,u.sg,l._Y,l.JL,l.sg,l.u,s.gu,s.Sm,s.YG],pipes:[u.Nd],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;margin-top:15%;transform:translateY(-50%)}.margenes[_ngcontent-%COMP%]{top:4%;left:4%}"]}),n})()}];let v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Z)],m.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,l.u5,s.Pc,v,l.UX]]}),n})()}}]);